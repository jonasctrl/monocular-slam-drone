<launch>
  <!-- Launch OctoMap Server Node -->
  <node pkg="octomap_server" type="octomap_server_node" name="octomap_server" output="screen">
    <!-- Remap cloud_in to the ORB_SLAM3 map points topic -->
    <remap from="cloud_in" to="/orb_slam3/map_points" />
    
    <!-- Parameters for OctoMap -->
    <param name="resolution" value="0.01" />
    <param name="frame_id" value="world" />

    <!-- Enable publishing the 2D occupancy grid map -->
    <param name="publish_2d_map" value="true" />
    <param name="latch_2d_map" value="true" />
    <param name="map_topic" value="octomap_2d_grid" />

    <!-- Enable publishing of the full 3D map in binary format -->
    <param name="publish_full_map" value="true" />
    <param name="binary_output" value="true" /> <!-- Changed to 'true' for binary output -->
    <param name="output_file" value="" /> <!-- Optionally specify a file for saving the map -->
  </node>

  <!-- Launch RViz to visualize the OctoMap -->
  <node pkg="rviz" type="rviz" name="rviz" args="-d /opt/catkin_ws/octomap_launch/rviz/visual.rviz" output="screen">
  </node>
</launch>
